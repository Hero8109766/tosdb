<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="#{seo-description}#">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <base href="/">
  <link rel="manifest" href="/manifest.json">
  <link rel="shortcut icon" type="image/png" href="assets/favicon.png"/>
  <title>#{seo-title}#</title>

  <!-- Additional performance tweaks -->
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://www.googletagmanager.com"><link rel="dns-prefetch" href="https://www.googletagmanager.com">

  <!-- Theme -->
  <link href='assets/themes/light.css' rel='stylesheet' />
  <link href='assets/themes/dark.css' rel='stylesheet' />
  <script type="application/javascript">
      function getTheme() {
          return localStorage.getItem('theme') || 'light';
      }
      function setTheme(theme) {
          localStorage.setItem('theme', theme);
          document.head
              .querySelectorAll('link[rel="stylesheet"]')
              .forEach(value => {
                  let disabled = value.getAttribute('href').includes('/themes/') && !value.getAttribute('href').endsWith(theme + '.css');
                      disabled ? value.setAttribute('disabled', 'true') : value.removeAttribute('disabled');
              });
      }

      setTheme(getTheme());
  </script>

  <!-- Trigger browser 'Translate' button -->
  <script type="application/javascript">
    let lang = { 'jtos': 'ja', 'ktos': 'ko', 'ktest': 'ko', 'twtos': 'zh' };
        lang = Object
          .keys(lang)
          .find(value => location.href.indexOf(`/${ value }/`) > 0) || 'en';

    document
      .getElementsByTagName('html')[0]
      .setAttribute('lang', lang);
  </script>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KK6GQX3');</script>

<link rel="stylesheet" href="styles.79bab261d14983290ac2.css"></head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KK6GQX3"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- Theme (temporary) -->
  <script type="application/javascript">
      let theme = getTheme();
      let background = {
          'dark': '#222',
          'light': 'white',
      };
      let color = {
          'dark': 'white',
          'light': '#212529',
      };

      document.body.style.backgroundColor = background[theme];
      document.body.style.color = color[theme];
      document.body.style.margin = '0';
      document.body.onload = () => document.body.setAttribute('style', '');
  </script>

  <app-root>
    <!-- Specific CSS for the Server-Side Rendering -->
    <style>
      .dropdown:hover .dropdown-menu { display: block; }
    </style>

    <nav class="navbar navbar-dark mb-5 text-uppercase" style="background: #002A3A">
      <a class="navbar-brand mr-4 p-0 order-0" href="/itos">
        <img height="47" src="assets/images/logo_tos.png" style="transform: scale(1.25)">
      </a>
      <div class="navbar-expand m-auto m-md-0 order-3 order-md-1 pb-2 pb-md-0 pt-3 pt-md-0">
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false">
              Database
            </a>
            <div class="dropdown-menu">
              <div class="dropdown-header">Items</div>
              <a class="dropdown-item" href="/#{region}#/database/books" title="Books">Books</a>
              <a class="dropdown-item" href="/#{region}#/database/cards" title="Cards">Cards</a>
              <a class="dropdown-item" href="/#{region}#/database/collections" title="Collections">Collections</a>
              <a class="dropdown-item" href="/#{region}#/database/cubes" title="Cubes">Cubes</a>
              <a class="dropdown-item" href="/#{region}#/database/equipment" title="Equipment">Equipment</a>
              <a class="dropdown-item" href="/#{region}#/database/equipment-sets" title="Equipment">Equipment Sets</a>
              <a class="dropdown-item" href="/#{region}#/database/gems" title="Gems">Gems</a>
              <a class="dropdown-item" href="/#{region}#/database/items" title="Items">Items</a>
              <a class="dropdown-item" href="/#{region}#/database/recipes" title="Recipes">Recipes</a>
              <div class="dropdown-divider"></div>
              <div class="dropdown-header">Player</div>
              <a class="dropdown-item" href="/#{region}#/database/attributes" title="Attributes">Attributes</a>
              <a class="dropdown-item" href="/#{region}#/database/classes" title="Jobs">Jobs</a>
              <a class="dropdown-item" href="/#{region}#/database/skills" title="Skills">Skills</a>
              <div class="dropdown-divider"></div>
              <div class="dropdown-header">World</div>
              <a class="dropdown-item" href="/#{region}#/database/monsters" title="Monsters">Monsters</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/#{region}#/simulator">Skill Simulator</a>
          </li>
        </ul>
      </div>
      <div class="d-none d-lg-block flex-grow-1 justify-content-center mt-3 mt-lg-0 order-5 order-lg-3"></div>
      <div class="order-2 w-100 d-md-none"></div>
      <div class="order-4 w-100 d-lg-none"></div>
      <div class="navbar-expand order-1 order-md-3">
        <ul class="navbar-nav align-items-center">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false">
              Region
            </a>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="/itos/#{url}#" title="iTOS">iTOS</a>
              <a class="dropdown-item" href="/jtos/#{url}#" title="jTOS">jTOS</a>
              <a class="dropdown-item" href="/ktos/#{url}#" title="kTOS">kTOS</a>
              <a class="dropdown-item" href="/ktest/#{url}#" title="kTEST">kTEST</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container" style="min-height: calc(100% - 80px)">
      #{content}#
    </div>

  </app-root>

  <!-- HotFix: clear app-root for non-crawlers, to not fool the user into thinking this has already loaded -->
  <script type="text/javascript">
    document.body.getElementsByTagName('app-root')[0].innerHTML = 'Loading...';
  </script>

<script type="text/javascript" src="runtime.ec2944dd8b20ec099bf3.js"></script><script type="text/javascript" src="polyfills.0a60c6ff1b5f926260c3.js"></script><script type="text/javascript" src="scripts.8100acffbf3dfdd23955.js"></script><script type="text/javascript" src="main.5f1d7d7ca0108cb9e5d4.js"></script></body>
</html>
